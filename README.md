# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack

Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/scss/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```
## Сборка

```
npm run build
```

или

```
yarn build
```

## Архитектура

Приложение реализовано по MVP архитектуре и состоит из компонентов:

| Компонент | Описание | Базовый класс | Связанные классы |
|-----------|-----------|--------------|-----------------|
| Model | Модель данных | Model | - Product<br>- Cart<br>- Order |
| View | Модель отображения | Component | - ProductListView<br>- ProductView<br>- CartView<br>- OrderView<br>- DeliveryForm<br>- ContactsForm<br>- Success |
| Presenter | Модель связи | - | - AppPresenter<br>- CartPresenter<br>- OrderPresenter |

![architecture.png](architecture.png)

## Базовые классы

### EventEmitter
Реализует паттерн «Наблюдатель». Методы:
- `on`: подписка на событие
- `off`: отписка от события
- `emit`: уведомление подписчиков
- `onAll`: подписка на все события
- `offAll`: сброс всех подписчиков

### Component
Базовый класс для всех представлений. Реализует методы для работы с DOM:
- Управление классами элементов
- Установка текстового содержимого
- Управление атрибутами

### Model
Базовый класс для моделей данных:
- Связывает данные со свойствами объекта
- Инициализирует события при изменении данных

### APIClient
Базовый класс для работы с API:
- GET-запросы для получения данных
- POST-запросы для отправки данных

## Компоненты моделей

### Product
Класс товара:
- Хранит данные: id, title, description, image, category, price
- Преобразует данные из API
- Генерирует события при изменении

### Cart
Класс корзины:
- Управляет списком товаров
- Рассчитывает общую стоимость
- Методы: add, remove, clear

### Order
Класс заказа:
- Хранит данные: payment, email, phone, address, items
- Валидирует поля формы
- Отправляет заказ на сервер

## Компоненты представления

### ProductListView
- Отображает каталог товаров
- Создает карточки товаров
- Обрабатывает открытие модальных окон

### ProductView
- Отображает детальную информацию о товаре
- Управляет добавлением в корзину
- Обрабатывает закрытие модального окна

### CartView
- Отображает содержимое корзины
- Показывает общую стоимость
- Управляет удалением товаров

### OrderView
- Отображает формы оформления заказа
- Валидирует введенные данные
- Показывает ошибки валидации

## API
Методы API:
- `getProducts`: получение списка товаров
- `getProduct`: получение информации о товаре
- `createOrder`: создание заказа

## События
- `catalog:changed`: обновление каталога
- `card:open`: открытие карточки товара
- `basket:open`: открытие корзины
- `order:submit`: отправка заказа
- `modal:open`: открытие модального окна
- `modal:close`: закрытие модального окна